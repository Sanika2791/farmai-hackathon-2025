<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåæ FarmAI Helper - Your AI Crop Doctor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: white;
            padding: 30px 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
        }

        .step-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .crop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .crop-option {
            background: linear-gradient(45deg, #56ab2f, #a8e6cf);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            font-size: 1.1em;
            font-weight: bold;
        }

        .crop-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(86, 171, 47, 0.4);
        }

        .crop-option.selected {
            background: linear-gradient(45deg, #ff6b6b, #ffa726);
            transform: scale(1.05);
        }

        .symptom-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .symptom-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .symptom-item:hover {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .symptom-item.selected {
            background: linear-gradient(45deg, #4caf50, #8bc34a);
            color: white;
            border-color: #4caf50;
        }

        .weather-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .weather-item {
            background: #fff3e0;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .weather-item:hover {
            background: #ffe0b2;
            border-color: #ff9800;
        }

        .weather-item.selected {
            background: linear-gradient(45deg, #ff9800, #ffc107);
            color: white;
            border-color: #ff9800;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results {
            margin-top: 30px;
        }

        .diagnosis-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .confidence-bar {
            background: rgba(255,255,255,0.2);
            height: 10px;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .confidence-fill {
            background: white;
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease;
        }

        .treatment-section {
            background: #e8f5e8;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .treatment-section h3 {
            color: #2e7d32;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .treatment-list {
            list-style: none;
        }

        .treatment-list li {
            background: white;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }

        .prevention-section {
            background: #fff3e0;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .prevention-section h3 {
            color: #f57c00;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .prevention-list {
            list-style: none;
        }

        .prevention-list li {
            background: white;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ff9800;
        }

        .severity-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 10px 5px;
        }

        .severity-high {
            background: #ffcdd2;
            color: #c62828;
        }

        .severity-medium {
            background: #fff3e0;
            color: #ef6c00;
        }

        .severity-low {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .progress-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #bdc3c7;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .progress-step.active {
            background: #667eea;
        }

        .progress-step.completed {
            background: #4caf50;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .crop-grid {
                grid-template-columns: 1fr;
            }
            
            .symptom-grid {
                grid-template-columns: 1fr;
            }
            
            .weather-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üåæ FarmAI Helper</h1>
            <p>Your AI-Powered Crop Disease Diagnosis System</p>
            <p><small>Developed for NextGen Hackathon 2025</small></p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-step active" id="step1-indicator">1</div>
            <div class="progress-step" id="step2-indicator">2</div>
            <div class="progress-step" id="step3-indicator">3</div>
            <div class="progress-step" id="step4-indicator">4</div>
        </div>

        <div class="card">
            <!-- Step 1: Crop Selection -->
            <div class="step active" id="step1">
                <h2 class="step-title">üå± Select Your Crop</h2>
                <div class="crop-grid">
                    <button class="crop-option" onclick="selectCrop('rice')">
                        üåæ<br>Rice<br><small>‡§ß‡§æ‡§®</small>
                    </button>
                    <button class="crop-option" onclick="selectCrop('wheat')">
                        üåæ<br>Wheat<br><small>‡§ó‡•á‡§π‡•Ç‡§Ç</small>
                    </button>
                    <button class="crop-option" onclick="selectCrop('tomato')">
                        üçÖ<br>Tomato<br><small>‡§ü‡§Æ‡§æ‡§ü‡§∞</small>
                    </button>
                    <button class="crop-option" onclick="selectCrop('potato')">
                        ü•î<br>Potato<br><small>‡§Ü‡§≤‡•Ç</small>
                    </button>
                </div>
                <button class="btn" id="next1" onclick="nextStep(2)" disabled>
                    Continue to Symptoms ‚Üí
                </button>
            </div>

            <!-- Step 2: Symptom Selection -->
            <div class="step" id="step2">
                <h2 class="step-title">üîç What symptoms do you see?</h2>
                <p style="text-align: center; margin-bottom: 20px; color: #7f8c8d;">
                    Select all symptoms that match what you observe on your crops
                </p>
                <div class="symptom-grid" id="symptom-grid">
                    <!-- Symptoms will be populated by JavaScript -->
                </div>
                <button class="btn" onclick="prevStep(1)">‚Üê Back to Crop Selection</button>
                <button class="btn" id="next2" onclick="nextStep(3)" disabled>
                    Continue to Weather ‚Üí
                </button>
            </div>

            <!-- Step 3: Weather Conditions -->
            <div class="step" id="step3">
                <h2 class="step-title">üå§Ô∏è Recent Weather Conditions</h2>
                <p style="text-align: center; margin-bottom: 20px; color: #7f8c8d;">
                    Select the weather conditions from the past 2-3 weeks
                </p>
                <div class="weather-grid">
                    <div class="weather-item" onclick="toggleWeather(this, 'high humidity')">
                        üíß<br>High Humidity<br><small>‡§Ö‡§ß‡§ø‡§ï ‡§®‡§Æ‡•Ä</small>
                    </div>
                    <div class="weather-item" onclick="toggleWeather(this, 'heavy rain')">
                        üåßÔ∏è<br>Heavy Rain<br><small>‡§≠‡§æ‡§∞‡•Ä ‡§¨‡§æ‡§∞‡§ø‡§∂</small>
                    </div>
                    <div class="weather-item" onclick="toggleWeather(this, 'cool nights')">
                        üåô<br>Cool Nights<br><small>‡§†‡§Ç‡§°‡•Ä ‡§∞‡§æ‡§§‡•á‡§Ç</small>
                    </div>
                    <div class="weather-item" onclick="toggleWeather(this, 'hot days')">
                        ‚òÄÔ∏è<br>Hot Days<br><small>‡§ó‡§∞‡•ç‡§Æ ‡§¶‡§ø‡§®</small>
                    </div>
                    <div class="weather-item" onclick="toggleWeather(this, 'drought')">
                        üèúÔ∏è<br>Drought<br><small>‡§∏‡•Ç‡§ñ‡§æ</small>
                    </div>
                    <div class="weather-item" onclick="toggleWeather(this, 'cloudy days')">
                        ‚òÅÔ∏è<br>Cloudy Days<br><small>‡§¨‡§æ‡§¶‡§≤ ‡§µ‡§æ‡§≤‡•á ‡§¶‡§ø‡§®</small>
                    </div>
                </div>
                <button class="btn" onclick="prevStep(2)">‚Üê Back to Symptoms</button>
                <button class="btn" onclick="diagnose()">
                    üéØ Get AI Diagnosis
                </button>
            </div>

            <!-- Step 4: Results -->
            <div class="step" id="step4">
                <h2 class="step-title">üéØ AI Diagnosis Results</h2>
                <div id="results-container">
                    <!-- Results will be populated by JavaScript -->
                </div>
                <button class="btn" onclick="startOver()">
                    üîÑ Diagnose Another Crop
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let selectedCrop = '';
        let selectedSymptoms = [];
        let selectedWeather = [];

        // Crop symptoms database
        const cropSymptoms = {
            'rice': [
                'brown spots on leaves',
                'white centers in spots',
                'wilting of plants',
                'stunted growth',
                'neck breaking',
                'water-soaked lesions',
                'yellow leaf margins',
                'leaves turning brown',
                'premature leaf drying',
                'dark brown lesions'
            ],
            'wheat': [
                'reddish-brown spots on leaves',
                'yellow powder on leaves',
                'premature leaf death',
                'reduced grain weight',
                'weak stems',
                'white powdery patches',
                'leaves turning yellow',
                'reduced tillering',
                'poor grain development'
            ],
            'tomato': [
                'dark spots with rings',
                'yellowing of lower leaves',
                'leaf drop',
                'stem lesions',
                'fruit rot',
                'water-soaked dark spots',
                'white mold on leaf undersides',
                'rapid plant collapse',
                'bad smell from infected parts'
            ],
            'potato': [
                'brown leaf spots',
                'wilting leaves',
                'black stem rot',
                'tuber rot',
                'plant collapse',
                'white mold growth',
                'soft tubers',
                'bad odor'
            ]
        };

        // Simple AI diagnosis logic (simplified version of Python code)
        const diseaseDatabase = {
            'rice': {
                'rice_blast': {
                    name: 'Rice Blast',
                    symptoms: ['brown spots on leaves', 'white centers in spots', 'wilting of plants', 'stunted growth'],
                    weather: ['high humidity', 'cool nights'],
                    severity: 'high',
                    treatment: [
                        'Apply Tricyclazole fungicide spray',
                        'Remove and burn affected plants', 
                        'Improve field drainage',
                        'Reduce nitrogen fertilizer'
                    ],
                    prevention: [
                        'Use resistant rice varieties',
                        'Proper plant spacing',
                        'Avoid over-fertilization'
                    ],
                    cost: '‚Çπ500-800 per acre'
                },
                'bacterial_blight': {
                    name: 'Bacterial Leaf Blight',
                    symptoms: ['water-soaked lesions', 'yellow leaf margins', 'leaves turning brown'],
                    weather: ['high humidity', 'heavy rain'],
                    severity: 'medium',
                    treatment: [
                        'Spray copper-based fungicide',
                        'Remove affected leaves',
                        'Apply balanced fertilizer'
                    ],
                    prevention: [
                        'Use certified seeds',
                        'Avoid water logging',
                        'Crop rotation'
                    ],
                    cost: '‚Çπ300-500 per acre'
                }
            },
            'wheat': {
                'rust_disease': {
                    name: 'Wheat Rust',
                    symptoms: ['reddish-brown spots on leaves', 'yellow powder on leaves', 'premature leaf death'],
                    weather: ['high humidity'],
                    severity: 'high',
                    treatment: [
                        'Apply Propiconazole spray',
                        'Use systemic fungicides',
                        'Remove infected plant debris'
                    ],
                    prevention: [
                        'Plant rust-resistant varieties',
                        'Avoid late sowing',
                        'Proper field sanitation'
                    ],
                    cost: '‚Çπ600-900 per acre'
                }
            },
            'tomato': {
                'early_blight': {
                    name: 'Early Blight',
                    symptoms: ['dark spots with rings', 'yellowing of lower leaves', 'leaf drop'],
                    weather: ['high humidity'],
                    severity: 'high',
                    treatment: [
                        'Apply Chlorothalonil spray',
                        'Remove affected leaves',
                        'Improve air circulation'
                    ],
                    prevention: [
                        'Use disease-free seeds',
                        'Crop rotation',
                        'Proper plant spacing'
                    ],
                    cost: '‚Çπ800-1200 per acre'
                }
            }
        };

        // Function to select crop
        function selectCrop(crop) {
            selectedCrop = crop;
            
            // Update UI
            document.querySelectorAll('.crop-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            document.getElementById('next1').disabled = false;
            
            // Load symptoms for selected crop
            loadSymptoms(crop);
        }

        // Function to load symptoms based on selected crop
        function loadSymptoms(crop) {
            const symptomGrid = document.getElementById('symptom-grid');
            symptomGrid.innerHTML = '';
            
            if (cropSymptoms[crop]) {
                cropSymptoms[crop].forEach(symptom => {
                    const symptomDiv = document.createElement('div');
                    symptomDiv.className = 'symptom-item';
                    symptomDiv.innerHTML = `
                        <strong>${symptom}</strong>
                        <br><small>Click to select</small>
                    `;
                    symptomDiv.onclick = () => toggleSymptom(symptomDiv, symptom);
                    symptomGrid.appendChild(symptomDiv);
                });
            }
        }

        // Function to toggle symptom selection
        function toggleSymptom(element, symptom) {
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                selectedSymptoms = selectedSymptoms.filter(s => s !== symptom);
            } else {
                element.classList.add('selected');
                selectedSymptoms.push(symptom);
            }
            
            document.getElementById('next2').disabled = selectedSymptoms.length === 0;
        }

        // Function to toggle weather selection
        function toggleWeather(element, weather) {
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                selectedWeather = selectedWeather.filter(w => w !== weather);
            } else {
                element.classList.add('selected');
                selectedWeather.push(weather);
            }
        }

        // Function to go to next step
        function nextStep(stepNumber) {
            // Hide current step
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show target step
            document.getElementById(`step${stepNumber}`).classList.add('active');
            
            // Update progress indicators
            updateProgressBar(stepNumber);
        }

        // Function to go to previous step
        function prevStep(stepNumber) {
            nextStep(stepNumber);
        }

        // Function to update progress bar
        function updateProgressBar(currentStep) {
            for (let i = 1; i <= 4; i++) {
                const indicator = document.getElementById(`step${i}-indicator`);
                if (i < currentStep) {
                    indicator.classList.remove('active');
                    indicator.classList.add('completed');
                } else if (i === currentStep) {
                    indicator.classList.add('active');
                    indicator.classList.remove('completed');
                } else {
                    indicator.classList.remove('active', 'completed');
                }
            }
        }

        // Simple AI diagnosis function
        function calculateMatch(userItems, diseaseItems) {
            if (!userItems.length) return 0;
            
            let matches = 0;
            userItems.forEach(userItem => {
                diseaseItems.forEach(diseaseItem => {
                    if (userItem.toLowerCase().includes(diseaseItem.toLowerCase()) || 
                        diseaseItem.toLowerCase().includes(userItem.toLowerCase())) {
                        matches++;
                    }
                });
            });
            
            return (matches / userItems.length) * 100;
        }

        // Main diagnosis function
        function diagnose() {
            const results = [];
            
            if (diseaseDatabase[selectedCrop]) {
                Object.entries(diseaseDatabase[selectedCrop]).forEach(([key, disease]) => {
                    const symptomMatch = calculateMatch(selectedSymptoms, disease.symptoms);
                    const weatherMatch = calculateMatch(selectedWeather, disease.weather);
                    
                    const confidence = (symptomMatch * 0.7) + (weatherMatch * 0.3);
                    
                    results.push({
                        ...disease,
                        confidence: Math.round(confidence)
                    });
                });
            }
            
            // Sort by confidence
            results.sort((a, b) => b.confidence - a.confidence);
            
            // Display results
            displayResults(results);
            nextStep(4);
        }

        // Function to display diagnosis results
        function displayResults(results) {
            const container = document.getElementById('results-container');
            
            if (results.length === 0) {
                container.innerHTML = `
                    <div class="diagnosis-card">
                        <h3>ü§î Unusual Symptoms Detected</h3>
                        <p>The symptoms you've described don't match our common disease patterns.</p>
                        <p><strong>Recommendation:</strong> Consult with a local agricultural expert for accurate diagnosis.</p>
                    </div>
                `;
                return;
            }
            
            const topResult = results[0];
            const confidenceColor = topResult.confidence > 60 ? '#4caf50' : topResult.confidence > 30 ? '#ff9800' : '#f44336';
            const confidenceText = topResult.confidence > 60 ? 'High Confidence' : topResult.confidence > 30 ? 'Moderate Confidence' : 'Low Confidence';
            
            container.innerHTML = `
                <div class="diagnosis-card">
                    <h3>üéØ Primary Diagnosis</h3>
                    <h2>${topResult.name}</h2>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${topResult.confidence}%; background: ${confidenceColor}"></div>
                    </div>
                    <p><strong>${confidenceText}: ${topResult.confidence}%</strong></p>
                    <span class="severity-badge severity-${topResult.severity}">
                        ${topResult.severity.toUpperCase()} SEVERITY
                    </span>
                    <p style="margin-top: 15px;"><strong>Treatment Cost:</strong> ${topResult.cost}</p>
                </div>

                <div class="treatment-section">
                    <h3>üíä Recommended Treatment</h3>
                    <ul class="treatment-list">
                        ${topResult.treatment.map(treatment => `<li>‚úÖ ${treatment}</li>`).join('')}
                    </ul>
                </div>

                <div class="prevention-section">
                    <h3>üõ°Ô∏è Prevention for Future</h3>
                    <ul class="prevention-list">
                        ${topResult.prevention.map(prevention => `<li>üîí ${prevention}</li>`).join('')}
                    </ul>
                </div>

                ${results.length > 1 ? `
                    <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h3 style="color: #666; margin-bottom: 15px;">üìã Other Possible Diseases</h3>
                        ${results.slice(1, 3).map(result => `
                            <div style="background: white; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #ddd;">
                                <strong>${result.name}</strong> - ${result.confidence}% match
                            </div>
                        `).join('')}
                    </div>
                ` : ''}

                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-top: 20px; text-align: center;">
                    <h4 style="color: #1976d2; margin-bottom: 10px;">‚ö†Ô∏è Important Note</h4>
                    <p style="color: #1976d2;">This is an AI-assisted diagnosis. For severe infections or if symptoms persist, please consult with local agricultural experts or extension officers.</p>
                </div>
            `;

            // Animate confidence bar
            setTimeout(() => {
                const fillElement = document.querySelector('.confidence-fill');
                if (fillElement) {
                    fillElement.style.width = topResult.confidence + '%';
                }
            }, 500);
        }

        // Function to start over
        function startOver() {
            selectedCrop = '';
            selectedSymptoms = [];
            selectedWeather = [];
            
            // Reset UI
            document.querySelectorAll('.crop-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            document.querySelectorAll('.symptom-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            document.querySelectorAll('.weather-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            document.getElementById('next1').disabled = true;
            document.getElementById('next2').disabled = true;
            
            // Go back to step 1
            nextStep(1);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üåæ FarmAI Helper initialized successfully!');
            updateProgressBar(1);
        });
    </script>
</body>
</html>
